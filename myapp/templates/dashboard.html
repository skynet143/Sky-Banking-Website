<!DOCTYPE html>
        {% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>

    <!-- Bootstrap CSS (You can replace the CDN with a local Bootstrap file if needed) -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Font Awesome CSS (You can replace the CDN with a local Font Awesome file if needed) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .navbar {
            width: 100%;
            background-color: #0D47A1;
        }

        .navbar .navbar-brand {
            color: #ffffff;
            font-size: 1rem;
        }

        .navbar .nav-link {
            color: #ffffff;
            font-size: 1rem;
        }

        .navbar .nav-link:hover {
            color: #80D8FF;
        }

        .navbar-toggler-icon {
            background-color: #ffffff;
        }

        #sidebar {
            background-color: #142231;
            color: #fff;
            padding: 20px;
            height: 150vh;
            overflow-y: auto;
            list-style: none;
        }

        #sidebar a {
            color: #fff;
            text-decoration: none;
            display: block;
            padding: 10px;
            font-size: 1rem;
            transition: 0.3s;
        }

        #sidebar a:hover {
            background-color: #80D8FF;
            color: #000;
        }

        #content {
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1, h2, h3 {
            color: #0D47A1;
        }

        #overview {
            background-color: #E3F2FD;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .financial-metrics {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .metric {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin: 10px;
            flex: 1 0 calc(33.333% - 20px);
            transition: 0.3s;
        }

        .metric:hover {
            transform: scale(1.05);
        }

        .metric h3 {
            color: #0D47A1;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .metric p {
            color: #666;
            font-size: 1.2rem;
        }

        .total-users,
        .total-accounts {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 20px;
        }

        .total-users h3,
        .total-accounts h3 {
            color: #0D47A1;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .total-users p,
        .total-accounts p {
            color: #666;
            font-size: 1.2rem;
        }

        .recent-transactions {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .recent-transactions h3 {
            color: #0D47A1;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .recent-transactions ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .recent-transactions li {
            margin-bottom: 10px;
            font-size: 1.2rem;
            color: #666;
        }

        .recent-transactions li::before {
            content: "\2022";
            color: #0D47A1;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
            margin-right: 8px;
        }

        .counter-box {
            display: block;
            background: #f6f6f6;
            padding: 40px 20px 37px;
            text-align: center
        }

        .counter-box p {
            margin: 5px 0 0;
            padding: 0;
            color: #909090;
            font-size: 18px;
            font-weight: 500
        }

        .counter-box i {
            font-size: 60px;
            margin: 0 0 15px;
            color: #d2d2d2
        }

        .counter {
            display: block;
            font-size: 32px;
            font-weight: 700;
            color: #666;
            line-height: 28px
        }

        .counter-box.colored {
            background: #0D47A1;
        }

        .counter-box.colored p,
        .counter-box.colored i,
        .counter-box.colored .counter {
            color: #fff
        }

        .counter-box {
            background: #f6f6f6;
            padding: 40px 20px 37px;
            text-align: center;
            margin-bottom: 20px;
        }

        .counter-box p {
            margin: 5px 0 0;
            padding: 0;
            color: #909090;
            font-size: 18px;
            font-weight: 500;
        }

        .counter-box i {
            font-size: 60px;
            margin: 0 0 15px;
            color: #d2d2d2;
        }

        .counter {
            display: block;
            font-size: 32px;
            font-weight: 700;
            color: #666;
            line-height: 28px;
        }

        .counter-box {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            transition: 0.3s;
        }

        .counter-box:hover {
            transform: scale(1.05);
        }

        .counter-box p {
            margin: 15px 0 0;
            padding: 0;
            color: #555;
            font-size: 18px;
            font-weight: 500;
        }

        .counter-box i {
            font-size: 60px;
            margin: 0 0 15px;
            color: #010d53;
        }

        .counter {
            display: block;
            font-size: 32px;
            font-weight: 700;
            color: #333;
            line-height: 28px;
        }

        .recent-transactions table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .recent-transactions th,
        .recent-transactions td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .recent-transactions th {
            background-color: #0D47A1;
            color: #fff;
        }

        .recent-transactions tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .recent-transactions tr:hover {
            background-color: #e0e0e0;
        }

        @media (max-width: 685px) {
            #sidebar {
                height: 57vh;
                overflow-y: auto;
            }
        }
@media (max-width: 766px) {
    #sidebar {
        height: 75vh;
        overflow-y: auto;
    }
}

            #sidebar ul {
                padding-left: 0;
            }

            #sidebar li {
                margin-bottom: 10px;
            }

        @media (max-width: 767px) {
            #content {
                padding: 10px;
            }

            .financial-metrics {
                flex-direction: column;
            }

            .metric {
                flex: 1 0 calc(100% - 20px);
                margin: 10px 0;
            }

            .four {
                flex: 1 0 calc(100% - 20px);
                margin-bottom: 10px;
            }

            .recent-transactions table {
                font-size: 14px;
            }
        }

    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="{% url 'dashboard' %}"><img src="{% static 'img/BankLogo.png' %}" height="40px"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <div class="flex-grow-1"></div>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'home' %}" target="_blank"><i class="fas fa-eye"></i> View Site</a>
            </li>
            {% if user.is_authenticated %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'adminlogout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </li>
            {% else %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'adminlogin' %}"><i class="fas fa-sign-in-alt"></i> Login</a>
            </li>
            {% endif %}
        </ul>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fas fa-chart-bar"></i> Admin Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'applications' %}">
                            <i class="fas fa-users"></i> User Management
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'users' %}">
                            <i class="fas fa-user"></i> Total Users
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'loanapplications' %}">
                            <i class="fas fa-hand-holding-usd"></i> Loan Applications
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fas fa-history"></i> Transaction History
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'reports' %}">
                            <i class="fas fa-file-alt"></i> Reports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="fas fa-question-circle"></i> Support
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">


            <section id="overview">
                <h2 class="mb-4">Overview</h2>
                {% for data in admin_dashboard %}

                <div class="financial-metrics">
                    <div class="metric bg-light text-white">
                        <h3>Transactions Amount</h3>
                        <p class="lead">₹ {{ data.total_transactions_amount }}</p>
                    </div>
                    <div class="metric bg-light text-white">
                        <h3>Total Loan Provided</h3>
                        <p class="lead">₹ {{data.total_loan_amount }}</p>
                    </div>
                    <div class="metric bg-light text-dark">
                        <h3>Net Income</h3>
                        <p class="lead">₹ {{ data.total_income }}</p>
                    </div>
                </div>

                <div class="container">
                    <div class="row">
                        <div class="col-md-6 col-lg-3">
                            <div class="counter-box colored">
                                <i class="fa-solid fa-smile"></i>
                                <span class="counter">{{ data.total_approved_users }}</span>
                                <p>Happy Customers</p>
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-3">
                            <div class="counter-box">
                                <i class="fa fa-users"></i>
                                <span class="counter">{{ data.total_registrations }}</span>
                                <p>Total Registrations</p>
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-3">
                            <div class="counter-box">
                                <i class="fa fa-exchange"></i>
                                <span class="counter">{{ data.total_transactions }}</span>
                                <p>Total Transactions</p>
                            </div>
                        </div>

                        <div class="col-md-6 col-lg-3">
                            <div class="counter-box">
                                <i class="fa-solid fa-money-bill"></i>
                                <span class="counter">{{ data.total_loan_applications }}</span>
                                <p>Loan Applications</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container mt-4">
                    <div class="recent-transactions bg-light p-4 rounded">
                        <h3 class="mb-4">Recent Transactions</h3>

                        <table>
                            <tr>
                                <th>Transaction ID</th>
                                <th>Amount</th>
                                <th>Transaction Type</th>
                                <th>Date</th>
                            </tr>
                            {% for transaction in transactions %}
                            <tr>
                                <td>{{ transaction.id }}</td>
                                <td>₹ {{ transaction.amount }}</td>
                                <td>{{ transaction.transaction_type }}</td>
                                <td>{{ transaction.timestamp }}</td>
                            </tr>
                            {% endfor %}
                        </table>

                    </div>
                </div>
{% endfor %}
            </section>
        </main>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
